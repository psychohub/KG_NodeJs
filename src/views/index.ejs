<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nodepop</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .anuncio-img {
      width: 300px;  
      height: 200px;
      object-fit: cover;
    }
    form div {
      margin-bottom: 10px; 
    }
  
    label {
      display: block;
      margin-bottom: 5px; 
    }

    ul {
      list-style-type: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      margin: 0;
      justify-content: space-around; 
    }
    li {
      flex-basis: calc(33.333% - 20px); 
      margin: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 5px; 
    }
    .anuncio-img {
      width: 50%; 
      height: auto; 
      border-radius: 5px 5px 0 0; 
    }
    @media (max-width: 800px) {
      li {
        flex-basis: calc(50% - 20px); 
      }
    }
    @media (max-width: 500px) {
      li {
        flex-basis: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#anunciosSinFiltro" data-bs-toggle="tab">Anuncios</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#anunciosConFiltro" data-bs-toggle="tab">Anuncios Con Filtro</a>
      </li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="anunciosSinFiltro">
         <form action="/api/ads/anuncios/registrar" method="post" enctype="multipart/form-data">
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div class="col-md-6">
     
          <h1 class="mb-4">Registrar Anuncio</h1>
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre:</label>
            <input type="text" class="form-control" id="nombre" name="nombre" required>
          </div>
        
          <div class="mb-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="venta" name="venta">
              <label class="form-check-label" for="venta">Venta</label>
            </div>
          </div>
        
          <div class="mb-3">
            <label for="precio" class="form-label">Precio:</label>
            <input type="number" class="form-control" id="precio" name="precio" required>
          </div>
        
          <div class="mb-3">
            <label for="foto" class="form-label">Foto:</label>
            <input type="file" class="form-control" id="foto" name="foto" accept="image/*" required>
          </div>
        
          <div class="mb-3">
            <label for="tags" class="form-label">Tags:</label>
            <select id="tags" class="form-select" name="tags" multiple>
              <option value="work">Work</option>
              <option value="lifestyle">Lifestyle</option>
              <option value="motor">Motor</option>
              <option value="mobile">Mobile</option>
            </select>
          </div>
        
          <button type="submit" class="btn btn-primary">Registrar Anuncio</button>
      
      </div>
    </div>
  </div>
  </form>
        <h1>Anuncios</h1>
  <!-- Mostrar la lista de anuncios aquí -->
  <ul>
    <% if (adData && adData.anuncios && adData.anuncios.length > 0) { %>
      <% adData.anuncios.forEach(anuncio => { %>
        <li>
          <h2><%= anuncio.nombre %></h2>
          <p><%= anuncio.venta ? 'Se vende' : 'Se busca' %></p>
          <p>Precio: <%= anuncio.precio %></p>
          <% if (anuncio.foto) { %>
            <img class="anuncio-img" src="<%= anuncio.foto %>" alt="<%= anuncio.nombre %>">
          <% } else { %>
            <img class="anuncio-img" src="/images/<%= anuncio.nombre %>.jpg" alt="<%= anuncio.nombre %>">
          <% } %>
          <p>Tags: <%= anuncio.tags.join(', ') %></p>
        </li>
      <% }); %>
    <% } else { %>
      <li>No se encontraron anuncios</li>
    <% } %>
  </ul>
      </div>
      <div class="tab-pane" id="anunciosConFiltro">
       <!-- Formulario para filtrar anuncios -->
       <div class="container">
        <div class="row justify-content-center align-items-center">
          <div class="col-md-6">
      <form action="/anuncios/filtro" method="get" class="mt-5">
        <h2 class="text-center mb-4">Filtrar Anuncios</h2>
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre:</label>
          <input type="text" id="nombre" name="nombre" class="form-control" <%= typeof nombre !== 'undefined' ? `value="${nombre}"` : '' %> >
        

        </div>
        <div class="mb-3">
          <label for="venta" class="form-label">Tipo:</label>
        <select id="venta" name="venta" class="form-select">
          <option value="true" <%= typeof venta !== 'undefined' && venta === 'true' ? 'selected' : '' %>>Venta</option>
          <option value="false" <%= typeof venta !== 'undefined' && venta === 'false' ? 'selected' : '' %>>Búsqueda</option>
        </select>
      </div>
        <label for="tag" class="form-label">Tag:</label>
          <input type="text" id="tag" name="tag" class="form-control" <%= typeof tag !== 'undefined' ? `value="${tag}"` : '' %> >
        
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="precioMin" class="form-label">Precio Mínimo:</label>
        <input type="number" id="precioMin" name="precioMin" class="form-control" <%= typeof precioMin !== 'undefined' ? `value="${precioMin}"` : '' %> >
      </div>
      
      <div class="col-md-6 mb-3">
        <label for="precioMax" class="form-label">Precio Máximo:</label>
        <input type="number" id="precioMax" name="precioMax" class="form-control" <%= typeof precioMax !== 'undefined' ? `value="${precioMax}"` : '' %> >
        
      </div>
    </div>
        <button type="submit" class="btn btn-primary">Buscar</button>
      </form>
      </div>
      </div>
      </div>
      <h1>Anuncios</h1>
      <!-- Mostrar la lista de anuncios aquí -->
      <ul>
        <% if (adData && adData.anuncios && adData.anuncios.length > 0) { %>
          <% adData.anuncios.forEach(anuncio => { %>
            <li>
              <h2><%= anuncio.nombre %></h2>
              <p><%= anuncio.venta ? 'Se vende' : 'Se busca' %></p>
              <p>Precio: <%= anuncio.precio %></p>
              <% if (anuncio.foto) { %>
                <img class="anuncio-img" src="<%= anuncio.foto %>" alt="<%= anuncio.nombre %>">
              <% } else { %>
                <img class="anuncio-img" src="/images/<%= anuncio.nombre %>.jpg" alt="<%= anuncio.nombre %>">
              <% } %>
              <p>Tags: <%= anuncio.tags.join(', ') %></p>
            </li>
          <% }); %>
        <% } else { %>
          <li>No se encontraron anuncios</li>
        <% } %>
      </ul>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</body>


</html>